<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Identity Access</title>
    <link rel="stylesheet" href="index.css">
    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!--Icons -->
    <script src="https://kit.fontawesome.com/c3ebb3a7f0.js" crossorigin="anonymous"></script>



    <style>
        /* Custom responsive width classes based on Bootstrap's breakpoints */
        .w-xs-altar {width: 70% !important}
        @media (min-width: 576px) { /* sm */
            .w-sm-altar { width: 50% !important; }
        }
        @media (min-width: 768px) { /* md */
            .w-md-altar { width: 35% !important; }
        }
        @media (min-width: 992px) { /* lg */
            .w-lg-altar { width: 25% !important; }
        }
        @media (min-width: 1200px) { /* xl */
            .w-xl-altar { width: 25% !important; }
        }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1">

  </head>
  <body>
    <div class="screen-size-indicator d-block d-sm-none">XS Screen</div>
    <div class="screen-size-indicator d-none d-sm-block d-md-none">SM Screen</div>
    <div class="screen-size-indicator d-none d-md-block d-lg-none">MD Screen</div>
    <div class="screen-size-indicator d-none d-lg-block d-xl-none">LG Screen</div>
    <div class="screen-size-indicator d-none d-xl-block">XL Screen</div>

    <div class="altar_image_container m-4">
      <img src="images/altar_image.png" alt="altar_image" class="mx-auto d-block w-xs-altar w-sm-altar w-md-altar w-lg-altar w-xl-altar">
    </div>

    <div class="container">
      <div class="row">
          <div class="cipher_input_container col-10 offset-1 col-md-10 offset-md-1 mt-3 mb-3">
              <input type="text" class="form-control" id="cipher_input" placeholder="CIPHER TEXT">
              <div class="d-flex justify-content-center mt-2">
                <button type="submit" class="btn btn-primary">ENTRY</button>
              </div>
          </div>
          <div class="cipher_output_container col-10 offset-1 col-xs-8 offset-xs-2 col-md-10 offset-md-1 mb-3">
              <label for="cipher_output" class="text-center d-block">There could be a label here or not:</label>
              <textarea id="cipher_output" class="form-control" rows="1" readonly style="resize: none"></textarea>
              <button onclick="copyToClipboard()" class="btn btn-secondary copy-button"><i class="fa-solid fa-copy"></i></button>

          </div>
      </div>
  </div>

  <script>
    function copyToClipboard() {
        const textarea = document.getElementById('cipher_output');
        textarea.select();
        document.execCommand('copy');
    }
    
    async function validateCipher() {
        const cipherInput = document.getElementById('cipher_input').value;

        // Send the key to the Netlify function
        const response = await fetch('/.netlify/functions/validate-key', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ key: cipherInput })
        });

        const data = await response.json();

        // Update the cipher_output based on server response
        const cipherOutput = document.getElementById('cipher_output');
        if (data.status === "success") {
            cipherOutput.value = "Key is valid!";
        } else {
            cipherOutput.value = "Invalid key!";
        }
    }
    </script>
  </body>
</html>
